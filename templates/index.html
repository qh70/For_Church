<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"></meta>
        <meta name="viewport" content="width=device-width initial-scale=1 maximum-scale=1"/>
        <title>科學與創世紀</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <style type="text/css"> 
            * {box-sizing: border-box;}
            body {
                color: white;
                background-image: url("../static/homepage.jpg");background-repeat: no-repeat;
                background-attachment: fixed;background-size: 100% 100%;}
            .h1 {margin-top: 101px;text-align: center;font-size: 36px;}
            .h2 {margin-top: 20px;text-align: center;font-size: 20px;}
            .h21 {display: none;}
            .container {margin-top: 104px;display: flex;text-align: center;justify-content: center;box-sizing: border-box;}
            .six_boxes {width: 134px;height: 230px;margin: 1%;object-fit:contain;}
            .container_for_keys {
                display: flex;
                width: 425px;height: 104px;
                margin: auto;
                margin-top: 16px;
                text-align: center;
                justify-content: center;
            }
            .three_individual_container {
                width: 92px;
                margin-left: 74px;margin-right: 74px;
            }
            .three_keys {width: 92px;height: 104px;cursor: pointer;}
            /* .doors_for_third_key {} */
            .hold {border: solid 5px #ccc;}
            .hovered {
                background: #f4f4f4;
                border-style: dashed;
            }
            .dot {
                width: 4rem;height: 4rem;
                position: absolute;
                transform: translate(-50%, -50%);
            }
            /* .hide_overflow_y{
                overflow-y:inherit;
                overflow-x:inherit;
            } */
            /*=========================================================================================================================*/
            @media (max-width:900px){
                h1 {margin-top: 73px;text-align: center;}
                .h2 {display: none;}
                .h21 {display: block;margin-top: 20px;text-align: center;font-size: 20px;}
                .container {margin-top: 37px;padding: 0px;text-align: center;justify-content: center;flex-wrap:wrap;}
                .six_boxes {width: 166px;height: 284px;}
                .container_for_keys {
                    display: flex;
                    width: 425px;height: 66px;
                    margin: auto;
                    text-align: center;
                    justify-content: center;
                }
                .three_individual_container {
                    width: 92px;
                    margin: 40px;
                }
                .three_keys {
                    width: 92px;height: 104px;
                }
            }
            
            /*=========================================================================================================================*/
            @media (max-width:600px){
                body {
                    background-size: 100% 100%;
                }
                h1 {margin-top: 73px;text-align: center;}
                .h2 {display: none;margin-top: 20px;text-align: center;font-size: 20px;}
                .h21 {display: block;}
                .container {width: 85%;max-width: 400px;;margin-top: 37px;text-align: center;justify-content: center;flex-wrap:wrap;}
                .six_boxes {width: 83px;height: 142px;margin: 9px;margin-top: 9px;object-fit: contain;}
                .container_for_keys {
                    display: flex;
                    width: 270px;height: 66px;
                    margin: auto;
                    text-align: center;
                    justify-content: center;
                }
                .three_individual_container {
                    width: 60px;
                    margin: 20px;
                }
                .three_keys {
                    width: 60px;height: 66px;
                }
            }
        </style>
    </head>
    <body>
        <div class="h1">科學與創世紀</div>
        <div class="h2">跨越原本的思維觀點，開啟生命的對話空間</div>
        <div class="h21">跨越原本的思維觀點，</div>
        <div class="h21" style="padding-right: 20px;">開啟生命的對話空間</div>
        <div class="container" id="container">
            <img class="six_boxes doors door_beginning_universe" src="../static/door1.png">
            <img class="six_boxes doors door_biological_genetics" src="../static/door2.png">
            <img class="six_boxes doors door_people_monkey" src="../static/door3.png">
            <img class="six_boxes doors door_fossil" src="../static/door4.png">
            <img class="six_boxes doors door_evolution_theory" src="../static/door5.png">
            <img class="six_boxes doors door_ape" src="../static/door6.png">
        </div>
        <div style="font-size: 20px;margin-top: 54px;text-align: center;">請任選一支鑰匙開啟</div>   
        <div class="container_for_keys">
            <div class="three_individual_container">
                <img class="three_keys first_key" id="keyId1" src="../static/key1.png" draggable="true">
                <div>全人</div>
            </div>
            <div class="three_individual_container">
                <img class="three_keys second_key" id="keyId2" src="../static/key2.png" draggable="true">
                <div>染色體數</div>
            </div>
            <div class="three_individual_container">
                <img class="three_keys third_key" id="keyId3" src="../static/key3.png" draggable="true">
                <div>時間</div>
            </div>

        </div>  
        <script type="text/javascript">
            let key_situation;
            let door_situation;

            const doors = document.querySelectorAll(".doors")

            // Loop through door boxes and add listeners
            for (const door of doors){
                door.addEventListener("dragover", drag_over);
                door.addEventListener("dragenter", drag_enter);
                door.addEventListener("dragleave", drag_leave);
                door.addEventListener("drop", drag_drop);
            }

            // 第一把鑰匙
            const first_key = document.querySelector(".first_key");

            // first_key listeners
            first_key.addEventListener("dragstart", drag_start1);
            first_key.addEventListener("dragend", drag_end);

            // Drag Functions
            function drag_start1() {
                // document.body.classList.add("hide_overflow_y");
                key_situation = 1;
                setTimeout(() => (this.className = 'invisible'), 0);
            }
            
            // 第二把鑰匙
            const second_key = document.querySelector(".second_key");

            // second_key listeners
            second_key.addEventListener("dragstart", drag_start2);
            second_key.addEventListener("dragend", drag_end);

            // Drag Functions
            function drag_start2() {
                key_situation = 2;
                setTimeout(() => (this.className = 'invisible'), 0);
            }
            
            // 第三把鑰匙
            const third_key = document.querySelector(".third_key");

            // third_key listeners
            third_key.addEventListener("dragstart", drag_start3);
            third_key.addEventListener("dragend", drag_end);

            // Drag Functions
            function drag_start3() {
                key_situation = 3
                setTimeout(() => (this.className = 'invisible'), 0);
            }

            function drag_end() {
                this.className = 'three_keys';
                document.body.classList.remove("hide_overflow_y");
                eventPositiont();
            }

            function drag_over(e) {
                e.preventDefault();
            }

            function drag_enter(e) {
                e.preventDefault();
                this.className += ' hovered';
            }

            function drag_leave() {
                this.className = this.className.replace("hovered", "");
            }

            function drag_drop() {
                // 如果沒有通過，移除hovered效果
                if(this.className.includes("hovered")){
                    this.className = this.className.replace("hovered", "");
                }
                // 第一扇門通過
                if(key_situation === 3 && this.className.includes("door_beginning_universe")){
                    this.src = "../static/key3.png";
                    location.href = "./beginning_universe.html"
                }
                // 第二扇門通過
                else if(key_situation === 2 && this.className.includes("door_biological_genetics")){
                    this.src = "../static/key2.png";
                    location.href = "./biological_genetics.html"
                }
                // 第三扇門通過
                else if(key_situation === 1 && this.className.includes("door_people_monkey")){
                    this.src = "../static/key1.png";
                    location.href = "./people_monkey.html"
                }
                // 第四扇門通過
                else if(key_situation === 3 && this.className.includes("door_fossil")){
                    this.src = "../static/key3.png";
                    location.href = "./fossil.html"
                }
                // 第五扇門通過
                else if(key_situation === 2 && this.className.includes("door_evolution_theory")){
                    this.src = "../static/key2.png";
                    location.href = "./evolution_theory.html"
                }
                // 第六扇門通過
                else if(key_situation === 1 && this.className.includes("door_ape")){
                    this.src = "../static/key1.png";
                    location.href = "./ape.html"
                }
            }
            // mobile =============================================================================================================
            let keyId1 = document.getElementById("keyId1");
            let keyId2 = document.getElementById("keyId2");
            let keyId3 = document.getElementById("keyId3");
            // first_key listeners
            first_key.addEventListener("touchstart", e => {
                keyId1.style.display = "none";
                [...e.changedTouches].forEach(touch => {
                    const dot = document.createElement("img")
                    dot.classList.add("dot")
                    dot.style.top = `${touch.pageY}px`
                    dot.style.left = `${touch.pageX}px`
                    dot.id = touch.identifer1
                    dot.src = "../static/key1.png"
                    document.body.append(dot)
                    key_situation = 1
                })
            })

            first_key.addEventListener("touchmove", e => {
                [...e.changedTouches].forEach(touch => {
                    const dot = document.getElementById(touch.identifer1)
                    dot.style.top = `${touch.pageY}px`
                    dot.style.left = `${touch.pageX}px`
                })
            })

            first_key.addEventListener("touchend", e => {
                [...e.changedTouches].forEach(touch => {
                    const dot = document.getElementById(touch.identifer1)
                    dot.remove()
                    keyId1.style.display = "block";
                })
            });

            // second_key listeners
            second_key.addEventListener("touchstart", e => {
                keyId2.style.display = "none";
                [...e.changedTouches].forEach(touch => {
                    const dot = document.createElement("img")
                    dot.classList.add("dot")
                    dot.style.top = `${touch.pageY}px`
                    dot.style.left = `${touch.pageX}px`
                    dot.id = touch.identifer2
                    dot.src = "../static/key2.png"
                    document.body.append(dot)
                    key_situation = 2
                })
            })

            second_key.addEventListener("touchmove", e => {
                [...e.changedTouches].forEach(touch => {
                    const dot = document.getElementById(touch.identifer2)
                    dot.style.top = `${touch.pageY}px`
                    dot.style.left = `${touch.pageX}px`
                })
            })

            second_key.addEventListener("touchend", e => {
                [...e.changedTouches].forEach(touch => {
                    const dot = document.getElementById(touch.identifer2)
                    dot.remove()
                    keyId2.style.display = "block";
                })
            });

            // third_key listeners
            third_key.addEventListener("touchstart", e => {
                keyId3.style.display = "none";
                [...e.changedTouches].forEach(touch => {
                    const dot = document.createElement("img")
                    dot.classList.add("dot")
                    dot.style.top = `${touch.pageY}px`
                    dot.style.left = `${touch.pageX}px`
                    dot.id = touch.identifer3
                    dot.src = "../static/key2.png"
                    document.body.append(dot)
                    key_situation = 3
                })
            })

            third_key.addEventListener("touchmove", e => {
                [...e.changedTouches].forEach(touch => {
                    const dot = document.getElementById(touch.identifer3)
                    dot.style.top = `${touch.pageY}px`
                    dot.style.left = `${touch.pageX}px`
                })
            })

            third_key.addEventListener("touchend", e => {
                [...e.changedTouches].forEach(touch => {
                    const dot = document.getElementById(touch.identifer3)
                    dot.remove()
                    keyId3.style.display = "block";
                })
            });

            // Loop through door boxes and add listeners
            for (const door of doors){
                door.addEventListener("touchend", touch_end);
            }

            function touch_end(){
                alert(1)
                // 第一扇門通過
                if(key_situation === 3 && this.className.includes("door_beginning_universe")){
                    this.src = "../static/key3.png";
                    location.href = "./beginning_universe.html"
                }
                // 第二扇門通過
                else if(key_situation === 2 && this.className.includes("door_biological_genetics")){
                    this.src = "../static/key2.png";
                    location.href = "./biological_genetics.html"
                }
                // 第三扇門通過
                else if(key_situation === 1 && this.className.includes("door_people_monkey")){
                    this.src = "../static/key1.png";
                    location.href = "./people_monkey.html"
                }
                // 第四扇門通過
                else if(key_situation === 3 && this.className.includes("door_fossil")){
                    this.src = "../static/key3.png";
                    location.href = "./fossil.html"
                }
                // 第五扇門通過
                else if(key_situation === 2 && this.className.includes("door_evolution_theory")){
                    this.src = "../static/key2.png";
                    location.href = "./evolution_theory.html"
                }
                // 第六扇門通過
                else if(key_situation === 1 && this.className.includes("door_ape")){
                    this.src = "../static/key1.png";
                    location.href = "./ape.html"
                }
            }

            var eventPositiont = function(event){
                let door_beginning_universe = document.getElementsByClassName("door_beginning_universe")[0];
                // console.log(door_beginning_universe)

                var x = window.event.clientX;
                var y = window.event.clientY;
                var divx1 = door_beginning_universe.offsetLeft;
                var divy1 = door_beginning_universe.offsetTop;
                var divx2 = door_beginning_universe.offsetLeft + door_beginning_universe.offsetWidthl
                var divy2 = door_beginning_universe.offsetTop + door_beginning_universe.offsetHeight;
                if(x < divx1 || x > divx2 || y < divx1 || y > divy2){
                    alert("in")
                }
            }
            

        </script>
    </body>

    